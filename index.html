<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/main.css">
  <title>Document</title>
</head>
<body>
  <div class="res">
    <form class="form" action="index.html" method="post">
      <label for="width"> Insert width</label>
      <input type="text" name="width"  class="width">
      <label for="height"> Insert height</label>
      <input type="text" name="height"  class="height">
      <label for="long"> Insert long</label>
      <input type="text" name="long"  class="long">
      <label for="door"> Insert count of door</label>
      <input type="text" name="door"  class="door">
      <label for="door"> Insert count of windows</label>
      <input type="text" name="windows"  class="windows">
      <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!     -->
      <label for="walp"> Insert walp</label>
      <input type="text" name="walp"  class="walp">
      <label for="paint"> Insert paint</label>
      <input type="text" name="paint"  class="paint">
      <button type="submit" name="button" id="button">Обработать</button>
    </form>

  </div>
  <script>


  // var Room = {
  //   door: door,
  //   windows: windows,
  //   size: {
  //     width: sizeWidth,
  //     height: sizeHeight,
  //     long: long
  //   },
  //   options: {
  //     walper: {
  //       vinil: 20,
  //       green: 10,
  //       flez: 30
  //     },
  //     toPaint: {
  //       pink: 600,
  //       green: 21
  //     }
  //   },
  //   cost: 0,
  //
  //  math :  function (width, height) {
  //    return (this.size.width * this.size.height);
  //  },
  //  sum: function (walper, pain)  {
  //    var sum = 0;
  //    var sumP = 0;
  //     if(walp.length != 0){
  //       switch(walp){
  //         case 'vinil':
  //           sum = (this.options.walper.vinil * this.math());
  //           break;
  //         case 'green':.options.walper.vinil * this.math());
  //           break;
  //         case 'flez':
  //           sum = (this.options.walper.vinil * this.math());
  //           break;
  //         default:
  //           return 'walper is not choise!';
  //           break;
  //       }
  //     }
  //     if(pain.length !=0){
  //       switch(pain){
  //           return 'walper is not choise';
  //           break;
  //       }
  //     }
  //     // else {
  //     //   return ;
  //     // }
  //     if(sum != 0 || sumP != 0){
  //       this.cost = (sum + sumP);
  //       console.log("cost ", this.cost );
  //       return this.cost;
  //     }
  //     else {
  //       return (this.cost = 0);
  //     }
  //
  //  }
  // };      case 'pink':
  //           sumP = (this.options.walper.vinil * this.math());
  //           break;
  //         case 'green':
  //           sumP = (this.options.walper.vinil * this.math());
  //           break;
  //           return 'walper is not choise';
  //           break;
  //       }
  //     }
  //     // else {
  //     //   return ;
  //     // }
  //     if(sum != 0 || sumP != 0){
  //       this.cost = (sum + sumP);
  //       console.log("cost ", this.cost );
  //       return this.cost;
  //     }
  //     else {
  //       return (this.cost = 0);
  //     }
  //
  //  }
  // };      default:
  //           return 'walper is not choise';
  //           break;
  //       }
  //     }
  //     // else {
  //     //   return ;
  //     // }
  //     if(sum != 0 || sumP != 0){
  //       this.cost = (sum + sumP);
  //       console.log("cost ", this.cost );
  //       return this.cost;
  //     }
  //     else {
  //       return (this.cost = 0);
  //     }
  //
  //  }
  // };
  //           sum = (this.options.walper.vinil * this.math());
  //           break;
  //         case 'flez':
  //           sum = (this.options.walper.vinil * this.math());
  //           break;
  //         default:
  //           return 'walper is not choise!';
  //           break;
  //       }
  //     }
  //     if(pain.length !=0){
  //       switch(pain){
  //           return 'walper is not choise';
  //           break;
  //       }
  //     }
  //     // else {
  //     //   return ;
  //     // }
  //     if(sum != 0 || sumP != 0){
  //       this.cost = (sum + sumP);
  //       console.log("cost ", this.cost );
  //       return this.cost;
  //     }
  //     else {
  //       return (this.cost = 0);
  //     }
  //
  //  }
  // };      case 'pink':
  //           sumP = (this.options.walper.vinil * this.math());
  //           break;
  //         case 'green':
  //           sumP = (this.options.walper.vinil * this.math());
  //           break;
  //           return 'walper is not choise';
  //           break;
  //       }
  //     }
  //     // else {
  //     //   return ;
  //     // }
  //     if(sum != 0 || sumP != 0){
  //       this.cost = (sum + sumP);
  //       console.log("cost ", this.cost );
  //       return this.cost;
  //     }
  //     else {
  //       return (this.cost = 0);
  //     }
  //
  //  }
  // };      default:
  //           return 'walper is not choise';
  //           break;
  //       }
  //     }
  //     // else {
  //     //   return ;
  //     // }
  //     if(sum != 0 || sumP != 0){
  //       this.cost = (sum + sumP);
  //       console.log("cost ", this.cost );
  //       return this.cost;
  //     }
  //     else {
  //       return (this.cost = 0);
  //     }
  //
  //  }
  // };
  // var SaveRes = {
  //   room_0:{
  //     door: Room.door,
  //     windows: Room.windows,
  //     size: {
  //       width: Room.size.sizeWidth,
  //       height: Room.size.sizeHeight,
  //       long: Room.size.long
  //     },
  //     options: {
  //       walper: {
  //         vinil: Room.options.walper.vinil,
  //         green: Room.options.walper.green,
  //         flez: Room.options.walper.flez
  //       },
  //       toPaint: {
  //         pink: Room.options.toPaint.pink,
  //         green: Room.options.toPaint.green
  //       }
  //     },
  //     cost: Room.sum(walp, paint),
  //   }
  // };
  // var con = confirm("One more room?");




  function NewRoom (){

    var door = '';
    var windows = '';
    var width = '';
    var height = '';
    var long = '';
    var walper = '';
    var paint = '';
    var cost = '';

    this.setRoomsParams = function(door, windows, width, height, long, walp, paint) {
      try{
        door = door;
        windows = windows;
        width = width;
        height = height;
        long = long;
        walper = walp;
        paint = paint;

      } catch(err){
        console.log("problems in setRoomsParams");
      }

    this.setCostParam = function(cst){
      try{
        console.log("cost in setCostParam " + cst);
        cost = cst;
      }
      catch(err){
        console.log("problems in setCostparam");
      }
    }

    this.getRoomsParams = function (){
      // console.log("cost" + cost);
      var res = { "door" :door,
        "windows": windows,
        "width" : width ,
        "height" :height,
        "long" : long,
        "walper" : walper,
        "paint" : paint,
        "cost" : cost
        };
      return res;
    };
  };
};

NewRoom.prototype.costSum = function(res,kvad) {

    var sum = 0;
    var sumP = 0;

     if(res.walper.length > 0){
       switch(res.walper){
         case 'vinil':
           sum = (20 * kvad);
           break;
         case 'green':
           sum = (10 * kvad);
           break;
         case 'flez':
           sum = (30 * kvad);
           break;
         default:
           console.log('walper is not choise!');
           break;
       }
     }
     else {
       return sum = 0;
     }
     if(res.paint.length > 0){
       switch(res.paint){
         case 'pink':
           sumP = (600 * kvad);
           break;
         case 'green':
           sumP = (21 * kvad);
           break;
         default:
           console.log('paint is not choise');
           break;
       }
     }
     else {
       return sumP = 0;
     }
     if(sum != 0 || sumP != 0){
       cost = (sum + sumP);
       return cost ;
     }
     else {
       return (cost = 0);
     }

  };

  NewRoom.prototype.math = function  (res) {

    var kvad = (res.width  *  res.height);
    return kvad;
  };


    var btn = document.getElementById('button');
    var i = 1;
  btn.addEventListener('click',function(e) {
    e.preventDefault();

    var door = document.getElementsByName('door')[0].value,
        windows = document.getElementsByName("windows")[0].value,
        sizeWidth = document.getElementsByName("width")[0].value,
        sizeHeight = document.getElementsByName("height")[0].value,
        long = document.getElementsByName("long")[0].value,
        walp = document.getElementsByName("walp")[0].value,
        paint = document.getElementsByName("paint")[0].value;

    var mask = 'room_' + i;

    mask = new NewRoom ();
    mask.setRoomsParams(door, windows, sizeHeight, sizeHeight, long, walp, paint);
    var res = mask.getRoomsParams();

    var rs = {width :res.width,
              height: res.height};



    var kvad = mask.math.call(mask, rs);
    mask.costSum.call(mask,res,kvad);
    console.log(kvad);
    mask.setCostParam(kvad);
    res = mask.getRoomsParams();


    //  HOW IT MAKE WITH APLY????????????????????????????????????????????????????????????????????????????

    for (key in res){
      console.log('mask ' + key + " = " + res[key] );
    }
    // console.log("COST  res " + mask.costSum.call(mask,res,kvad));
    i++;


  })

  // var res = document.querySelector(.res).text(strJSON);


  // document.write(strJSON);


  // console.log(SaveRes);
  // console.log('Sum is ', result,  '$' );

  </script>
</body>
</html>
